// ConsoleApplication1.cpp : Defines the entry point for the console application.
//

#include <string.h>
#include <stdlib.h>
#include <stdio.h>
void check(int* _cookie, int _cookie2, int* p_size);
char buf2[100];

int main(int argc, char *argv[])
{
		int cookie2 = 0;
		int cookie = 0;
		char buf[50];
		int* p_size;
		int* p_cookie;
		int size = 50;
		

		//__debugbreak();
		if (argc != 3) { exit(1); }
		p_cookie = &cookie;
		p_size = &size;

		printf("buf: %08x cookie: %08x cookie2: %08x\n", (unsigned int)&buf, (unsigned int)&cookie, (unsigned int)&cookie2);
		strncpy(buf2, argv[2], 60);
		if (*(argv[1] + 8) == 0x49) {
			size = 84;
		}
		
		memcpy(buf, argv[1], size);
		check(p_cookie, cookie2,p_size);
		cookie2 += 1;
		printf("cookie %s \n", argv[0]);
		if (cookie != 0x71885A53) { exit(1); }
		cookie += 1;
		return 0;
	
}

	void check(int* _cookie, int _cookie2, int* p_size)
	{
		if (*_cookie == 0x71885A53)
		{
			*p_size -= _cookie2;
		
		}
		return;

	}


   

